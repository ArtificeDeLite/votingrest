#Voting Restaurants
##API for restaurant voting

    Notes
    1. возможен запуск из командной строки через cargo jndi plugin
       mvn clean package -DskipTests=true org.codehaus.cargo:cargo-maven2-plugin:1.7.10:run
    2. Для удобства реализации выбрана HSQLBD с хранением в виртуальной памяти, поэтому,
       при каждом запуске API происходит инициализация БД.
    3. Используется кеширование для списка ресторанов и меню всех ресторанов за сегодня (expire time = 5 minutes)

Для работы с данными требуется авторизация (basic auth)\
Регистрация нового пользователя возможна без авторизации\
Для получения данных необходимо авторизоваться с типом учетной записи **USER**.\
Для внесения изменений в данные, необходимо авторизоваться с типом учетной записи **ADMIN**.\
Для получения данных о пользователях, а так же для редактирования данных пользователей, нужен тип учетной записи ADMIN.

Примеры ***curl*** команд приведены в приложении.

###Типы данных

API предполагает работу со следующими типами данных:

- Пользователь API (**User**)
- Ресторан (**Restaurant**)
- Блюдо (**Dish**)
- Голос (**Vote**)

### Пользователь (User)

Каждый пользователь содержит следующую информацию:
- Имя пользователя (от 2 до 100 знаков) `name`
- Email `email`
- Пароль (от 5 до 100 знаков) `password`
- Дата регистрации `registration`
- разрешение учетной записи `enabled`
- Тип учетной записи (**USER** или **ADMIN**) `role`

Email пользователя является уникальным.

Работать с пользователями можно только с типом учетной записи **ADMIN**.

#####Работа с пользователями включает в себя:
 - получение списка всех пользователей `/admin/users`
 - получение информации о выбранном пользователе `/admin/users/id`
 - изменение информации о пользователе
 - удаление пользователя
 - создание нового пользователя
 
#####Каждый пользователь имеет возможность редактировать свой профиль, а именно
- получение информации о пользователе `/profile`
- изменение информации о пользователе

### Ресторан (Restaurant)

Каждая ресторан включает в себя следующую информацию:
- Название ресторана (от 3 до 100 знаков) (`description`)

Название ресторана является уникальным.

Вносить изменения в информацию о ресторане можно только с типом учетной записи **ADMIN**.
Выполнять чтение данных может любой зарегистрированный  пользователь.

#####Работа с ресторанами включает в себя:
 - получение списка всех ресторанов `/admin/restaurants`
 - получение списка всех ресторанов с меню на сегодня `/restaurants`
 - получение информации о выбранном ресторане `/admin/restaurants/id`; `/restaurants/id`
 - изменение информации о выбранном ресторане `/admin/restaurants/id`
 - добавление нового ресторана `/admin/restaurants`
 
 ### Блюда (Dish)
 
 Каждое блюдо включает в себя следующую информацию:
 - Название блюда (от 3 до 100 символов) `description`
 - Цена блюда (в центах) `price`
 - Дата актуальности меню `date`
 
 Название блюда и дата является уникальным.
 
 Вносить изменения в информацию о блюдах можно только с типом учетной записи **ADMIN**.
 Выполнять чтение данных может любой зарегистрированный  пользователь.
 
 #####Работа с информацией о блюдах включает в себя:
  - получение списка всех блюд для ресторана на текущую дату `/admin/restaurants/restaurantId/menu`; `/restaurants/restaurantId/menu`
  - получение списка всех блюд для ресторана на заданную дату `/admin/restaurants/100002/menu?date=YYYY-MM-DD`
  - получение информации о блюде `/admin/restaurants/restaurantId/menu/id`; `/restaurants/restaurantId/menu/id`
  - изменение информации о выбранном блюде `/admin/restaurants/restaurantId/menu/id`
  - добавление списка новых блюд `/admin/restaurants/restaurantId/menu`
  
 ### Голос (Vote)
   
   Каждый голос включает в себя следующую информацию:
   - Дату голоса `date`
   - Пользователь, который оставил голос
   - Ресторан, за который проголосовали
   
   Дата и пользователь являются уникальными.
   
   Голосовать и смотреть историю своих голосов может только зарегистрированный пользователь.
   
   ####Работа с информацией о голосах включает в себя:
   - получение списка всех голосов `/votes`
   - получение информации и голосе `/votes/id`
   - оставить голос `/votes?restaurantId=id`
   - изменить голос `/votes/voteId?restaurantId=id`